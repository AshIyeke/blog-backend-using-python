{% extends "blog/base.html" %}
{% block title %}{{ post.title }}{% endblock %}
{% block content %}
 <h1>{{ post.title }}</h1>
 <p class="date">
 Published {{ post.publish }} by {{ post.author }}
 </p>
 <p class="tags">
    Tags:
    {% for tag in post.tags.all %}
      <a href="{% url "blog:post_list_by_tag" tag.slug %}">
        {{ tag.name }}
      </a>
      {% if not forloop.last %}, {% endif %}
    {% endfor %}
  </p>
 {{ post.body|linebreaks }}
 <p>
 <a href="{% url "blog:post_share" post.id %}">
 Share this post
 </a>
</p>
{% with comments.count as total_comments %}
 <h2>
 {{ total_comments }} comment{{ total_comments|pluralize }}
 </h2>
{% endwith %}
    {% for comment in comments %}
    <div class="comment">
    <p class="date">
    {{ comment.created }} by {{ comment.name }}
    </p>
    {{ comment.body|linebreaks }}
    </div>
    {% empty %}
    <p>No comments yet.</p>
    {% endfor %}
    <h2>Add a new comment</h2>
    <form action="." method="post">
    {% csrf_token %}
    {{ comment_form.as_p }}
    <button type="submit">Add comment</button>

    </form>

    {% if similar_posts %}
    <h2>Similar posts</h2>
    
    {% for similar_post in similar_posts %}
      <p>
        <a href="{{ similar_post.get_absolute_url }}">
          {{ similar_post.title }}
        </a>
      </p>
    {% endfor %}
    
    {% endif %}


{% endblock %}